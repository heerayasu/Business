!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Resin & Kundhan Showcase</title>
  <style>
    :root{
      --bg:#f6f7fb; --card:#fff; --accent:#6b46c1; --muted:#6b7280; --glass: rgba(255,255,255,0.6);
      --radius:12px; --shadow:0 6px 20px rgba(42,42,84,0.08);
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0; background:linear-gradient(180deg,#fbfdff,var(--bg)); color:#111;}
    .wrap{max-width:1100px;margin:28px auto;padding:20px}

    header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:18px}
    header h1{font-size:20px;margin:0}
    .sub{color:var(--muted);font-size:13px}

    .top{display:grid;grid-template-columns:1fr 340px;gap:18px;margin-bottom:18px}

    /* Product add form */
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
    form .row{display:flex;gap:10px;margin-bottom:10px}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input[type=text],input[type=number],select{width:100%;padding:10px;border-radius:8px;border:1px solid #e6e8f0;font-size:14px}
    .filebox{display:flex;gap:10px;align-items:center}
    .preview{width:86px;height:86px;border-radius:8px;background:#f3f4f6;border:1px dashed #e7e9f3;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .preview img{width:100%;height:100%;object-fit:cover}
    button{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;border:0;cursor:pointer}
    button.ghost{background:transparent;color:var(--accent);border:1px solid #efe6ff}

    /* Filters */
    .filters{display:flex;gap:8px;align-items:center}
    .filters input{padding:10px;border-radius:10px;border:1px solid #e6e8f0}

    /* Grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
    .product{background:var(--card);border-radius:12px;overflow:hidden;box-shadow:var(--shadow);display:flex;flex-direction:column}
    .pimg{height:170px;background:#f8fafc;display:flex;align-items:center;justify-content:center}
    .pimg img{width:100%;height:100%;object-fit:cover}
    .pbody{padding:12px;flex:1;display:flex;flex-direction:column}
    .title{font-weight:600;margin:0 0 8px;font-size:15px}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:auto}
    .badge{padding:6px 8px;border-radius:999px;font-size:12px;background:#f3f0ff;color:var(--accent)}
    .price{font-weight:700}
    .actions{display:flex;gap:8px;margin-top:10px}
    .actions button{flex:1;padding:8px}

    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(8,8,20,0.6);display:none;align-items:center;justify-content:center;padding:20px}
    .modal.open{display:flex}
    .modal-card{background:var(--card);width:100%;max-width:720px;border-radius:12px;overflow:hidden}
    .modal-body{display:flex;gap:16px}
    .modal-body .left{flex:1}
    .modal-body .left img{width:100%;height:420px;object-fit:contain;background:#fafafa}
    .modal-body .right{width:320px;padding:16px}

    /* small screens */
    @media (max-width:820px){.top{grid-template-columns:1fr}.modal-body{flex-direction:column}.modal-body .left img{height:280px}}

    .footer-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:10px}
    .muted{color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Resin & Kundhan Showcase</h1>
        <div class="sub">Showcase products — upload pictures, add price, categorize and let customers browse.</div>
      </div>
      <div class="muted">Local demo — stores data in your browser (no server needed)</div>
    </header>

    <div class="top">
      <div class="card">
        <h3 style="margin-top:0">Add a product</h3>
        <form id="productForm">
          <div class="row">
            <div style="flex:1">
              <label>Product name</label>
              <input type="text" id="pname" placeholder="Eg. Resin Frame - Blue" required>
            </div>
            <div style="width:130px">
              <label>Price (₹)</label>
              <input type="number" id="pprice" placeholder="100" min="0" required>
            </div>
          </div>

          <div class="row">
            <div style="flex:1">
              <label>Category</label>
              <select id="pcat">
                <option value="Resin">Resin</option>
                <option value="Kundhan">Kundhan</option>
              </select>
            </div>
            <div style="width:140px">
              <label>Type</label>
              <select id="ptype">
                <option value="Frame">Frame</option>
              <option value="dollar">Dollar</option>
                <option value="Keychain">Keychain</option>
                <option value="Clock">Clock</option>
                <option value="Jewellery">Jewellery</option>
                <option value="Invisible Chain">Invisible Chain</option>
                <option value="Earrings">Earrings</option>
                <option value="Bangles">Bangles</option>
                <option value="Clips">Clips</option>
                <option value="Hair Accessory">Hair Accessory</option>
                <option value="Hairband">Hairband</option>
              </select>
            </div>
          </div>

          <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
            <div class="filebox">
              <input type="file" id="pimg" accept="image/*" required>
              <div class="preview" id="preview">Preview</div>
            </div>
            <div style="flex:1">
              <label class="muted">Tip: pick a clean photo. Images are stored in your browser.</label>
            </div>
          </div>

          <div style="display:flex;gap:10px">
            <button type="submit">Add product</button>
            <button type="button" class="ghost" id="clearAll">Clear all</button>
          </div>
        </form>
      </div>

      <div class="card">
        <h3 style="margin-top:0">Browse & Filters</h3>
        <div class="filters" style="margin-bottom:10px">
          <input id="search" placeholder="Search name or type" />
          <select id="filterCat">
            <option value="all">All categories</option>
            <option value="Resin">Resin</option>
            <option value="Kundhan">Kundhan</option>
          </select>
        </div>
        <div class="muted">Products will appear on the right. Click a product to view details, edit or delete it.</div>
      </div>
    </div>

    <div class="grid card" id="productGrid" style="padding:14px">
      <!-- products injected here -->
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
      <div class="modal-card">
        <div style="display:flex;justify-content:space-between;align-items:center;padding:12px;border-bottom:1px solid #f3f4f6">
          <strong id="mtitle"></strong>
          <button id="closeModal" class="ghost">Close</button>
        </div>
        <div class="modal-body">
          <div class="left"><img id="mimg" src="" alt="image"></div>
          <div class="right">
            <div style="margin-bottom:8px"><b>Price:</b> ₹<span id="mprice"></span></div>
            <div style="margin-bottom:8px"><b>Category:</b> <span id="mcat"></span></div>
            <div style="margin-bottom:8px"><b>Type:</b> <span id="mtype"></span></div>

            <div class="footer-actions">
              <button id="editBtn" class="ghost">Edit</button>
              <button id="deleteBtn">Delete</button>
            </div>

            <div style="margin-top:12px" class="muted">Note: This demo stores data locally in your browser using LocalStorage. Customers visiting this page on another device won't see these entries unless you host a server.</div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script>
    // Utilities: localStorage key
    const KEY = 'resin_kundhan_products_v1';

    const form = document.getElementById('productForm');
    const pname = document.getElementById('pname');
    const pprice = document.getElementById('pprice');
    const pimg = document.getElementById('pimg');
    const preview = document.getElementById('preview');
    const pcat = document.getElementById('pcat');
    const ptype = document.getElementById('ptype');

    const grid = document.getElementById('productGrid');
    const search = document.getElementById('search');
    const filterCat = document.getElementById('filterCat');
    const clearAll = document.getElementById('clearAll');

    const modal = document.getElementById('modal');
    const mimg = document.getElementById('mimg');
    const mtitle = document.getElementById('mtitle');
    const mprice = document.getElementById('mprice');
    const mcat = document.getElementById('mcat');
    const mtype = document.getElementById('mtype');
    const closeModal = document.getElementById('closeModal');
    const editBtn = document.getElementById('editBtn');
    const deleteBtn = document.getElementById('deleteBtn');

    let products = JSON.parse(localStorage.getItem(KEY) || '[]');
    let currentViewId = null;

    // image preview when selecting file
    pimg.addEventListener('change', ()=>{
      const f = pimg.files[0];
      if(!f) { preview.innerHTML = 'Preview'; return; }
      const reader = new FileReader();
      reader.onload = (e)=>{
        preview.innerHTML = '';
        const img = document.createElement('img'); img.src = e.target.result;
        preview.appendChild(img);
      }
      reader.readAsDataURL(f);
    });

    // submit add product
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const file = pimg.files[0];
      if(!file){ alert('Please add an image'); return; }
      const dataUrl = await toDataURL(file);
      const obj = {
        id: Date.now().toString(),
        name: pname.value.trim(),
        price: parseFloat(pprice.value) || 0,
        category: pcat.value,
        type: ptype.value,
        img: dataUrl
      };
      products.unshift(obj);
      save();
      renderProducts();
      form.reset(); preview.innerHTML = 'Preview';
    });

    function toDataURL(file){
      return new Promise((res,rej)=>{
        const r = new FileReader();
        r.onload = e=>res(e.target.result);
        r.onerror = rej;
        r.readAsDataURL(file);
      })
    }

    function save(){
      localStorage.setItem(KEY, JSON.stringify(products));
    }

    function renderProducts(){
      const q = search.value.trim().toLowerCase();
      const fc = filterCat.value;
      grid.innerHTML = products.filter(p=>{
        if(fc!=='all' && p.category!==fc) return false;
        if(!q) return true;
        return p.name.toLowerCase().includes(q) || p.type.toLowerCase().includes(q);
      }).map(p=>`
        <div class="product" data-id="${p.id}">
          <div class="pimg"><img src="${p.img}" alt="${escapeHtml(p.name)}"></div>
          <div class="pbody">
            <div class="title">${escapeHtml(p.name)}</div>
            <div class="muted">${escapeHtml(p.type)}</div>
            <div class="meta">
              <div class="badge">${escapeHtml(p.category)}</div>
              <div class="price">₹${Number(p.price).toFixed(0)}</div>
            </div>
            <div class="actions">
              <button onclick="viewProduct('${p.id}')" class="ghost">View</button>
              <button onclick="quickDelete('${p.id}')">Delete</button>
            </div>
          </div>
        </div>
      `).join('') || '<div style="padding:30px" class="muted">No products yet. Add from the left.</div>';
    }

    function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

    window.viewProduct = function(id){
      const p = products.find(x=>x.id===id); if(!p) return;
      currentViewId = id;
      mimg.src = p.img; mtitle.textContent = p.name; mprice.textContent = Number(p.price).toFixed(0);
      mcat.textContent = p.category; mtype.textContent = p.type; modal.classList.add('open');
    }

    window.quickDelete = function(id){
      if(!confirm('Delete this product?')) return;
      products = products.filter(x=>x.id!==id); save(); renderProducts();
    }

    deleteBtn.addEventListener('click', ()=>{
      if(!currentViewId) return; if(!confirm('Delete this product?')) return;
      products = products.filter(x=>x.id!==currentViewId); save(); renderProducts(); modal.classList.remove('open');
    });

    closeModal.addEventListener('click', ()=>{ modal.classList.remove('open'); });
    modal.addEventListener('click', (e)=>{ if(e.target===modal) modal.classList.remove('open'); });

    editBtn.addEventListener('click', ()=>{
      if(!currentViewId) return; const p = products.find(x=>x.id===currentViewId); if(!p) return;
      // populate form for edit (simple flow: delete old and prefill form)
      if(!confirm('Edit: product will be loaded into the add form. Save to add as new version.')) return;
      pname.value = p.name; pprice.value = p.price; pcat.value = p.category; ptype.value = p.type;
      // load image into preview (we can't write to file input for security) so we just set preview
      preview.innerHTML = '';
      const img = document.createElement('img'); img.src = p.img; preview.appendChild(img);
      // remove old product
      products = products.filter(x=>x.id!==currentViewId); save(); renderProducts(); modal.classList.remove('open');
    });

    search.addEventListener('input', renderProducts);
    filterCat.addEventListener('change', renderProducts);
    clearAll.addEventListener('click', ()=>{
      if(!confirm('Clear all products from this browser?')) return; products = []; save(); renderProducts();
    });

    // initial render
    renderProducts();
  </script>
</body>
</html>

